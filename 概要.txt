了解。その仕様で合っている前提で、**一つの概要ドキュメント**としてまとめます。
そのまま要件定義書のたたき台に使えるイメージです。

---

## 1. サイトの目的

本サイトの目的は、**複数のYouTube再生リストおよび個別動画を横断的に検索し、目的の動画を素早く見つけられるようにすること**である。
ユーザーは、YouTube上に点在する限定公開・公開動画を、自分専用の検索サイトに登録しておき、**タイトルやタグで瞬時に探し出せる状態**を作る。

---

## 2. 想定ユーザーと利用シナリオ

* 自分または他人のYouTubeチャンネルにある複数の再生リストをよく参照する人
* 限定公開の動画リンクを大量に扱っていて、YouTube標準UIでは管理・検索がしづらい人
* 「どの動画がどの再生リストにあったか」を意識せず、**横断検索で目的の動画を探したい人**

利用シナリオの例：

1. サイトにアクセスし、「猫」と検索する。
2. 過去に登録した全再生リスト・単発動画の中から、

   * タイトルに「猫」が含まれる動画
   * タグに「猫」が含まれる動画
     が一覧で表示される。
3. 一覧から動画のプレビューを見て、必要に応じてYouTube本体で開く。

---

## 3. 機能概要

### 3.1 検索機能（メイン機能）

* 登録済みの**すべての再生リストおよび単発動画**を対象に検索を行う。
* 検索対象：

  * 動画タイトル
  * ユーザーが付与したタグ（※タイトルと同列に扱う）
* 検索結果として表示する情報：

  * 動画タイトル
  * YouTube動画URL
  * 動画のプレビュー（YouTube埋め込み or サムネイル）
* 検索ワードが以下のいずれかに部分一致した動画をヒットさせる：

  * タイトル文字列
  * その動画に紐づくタグ名（複数可）

#### 検索例

検索ワード：`猫`

* 動画A

  * タイトル：`猫の散歩`
  * タグ：`さんぽ`
    → タイトルに「猫」を含むためヒット。

* 動画B

  * タイトル：`おでかけ`
  * タグ：`猫`, `外出`
    → タグに「猫」を含むためヒット。

---

### 3.2 タグ付与機能

* 各動画に対し、ユーザーが任意のタグを複数個付与できる。
* タグは例として以下のような用途を想定：

  * 内容カテゴリ（例：`歌舞伎`, `メイキング`）
  * 公演名・年度（例：`2024本公演`）
  * 内部用ラベル（例：`資料用`, `限定共有`）
* 検索時には「タイトル＋すべてのタグ名」を一つのテキストとみなし、
  キーワードが含まれていればヒットさせる。

---

### 3.3 登録機能（再生リスト / 単発動画）

#### 3.3.1 再生リスト登録

* ユーザーはサイト上のフォームに、任意の再生リストURLを貼り付ける。

  * 例：`https://www.youtube.com/playlist?list=PLxxxxx`
* サイトはYouTube Data APIを用いて、以下を自動取得する：

  * 再生リスト内の全動画の `videoId`
  * 各動画のタイトル、URL、サムネイル など
* 取得した全動画をサイト内のデータベースに登録し、以後検索対象とする。
* 対応する再生リストは**自分のチャンネルに限らず、他人のチャンネルのものでもよい**。
  ただしYouTubeの仕様上、APIで取得可能なのは **公開または限定公開（unlisted）** のみであり、完全な非公開リストは対象外となる。

#### 3.3.2 単発動画登録

* ユーザーは単一動画のURLを貼り付ける。

  * 例：`https://www.youtube.com/watch?v=xxxx`
* サイトはYouTube Data API `videos.list` を利用し：

  * `videoId` に対応するタイトル・URL・サムネイルを取得
* 取得した動画情報をデータベースに登録し、以後検索対象とする。

---

## 4. データ構造（概略）

内部的には、以下のようなテーブル構成を想定する。

### 4.1 動画テーブル（videos）

* `video_id`（YouTube動画ID）
* `title`（動画タイトル）
* `url`（`https://www.youtube.com/watch?v=...`）
* `thumbnail_url`（サムネイルURL）
* `playlist_id`（元の再生リストID／単発動画はNULLも許容）
* `channel_title` などの補助情報（必要に応じて）

### 4.2 タグ関連テーブル

1. `tags` テーブル

   * タグ名を一意に管理する。

2. `video_tags` テーブル

   * 1動画に複数タグ、1タグを複数動画が共有できるようにする中間テーブル。
   * 検索時には `動画タイトル + 紐づくタグ名` を結合して検索対象とする。

---

## 5. 技術的な想定（環境前提）

### 5.1 開発環境

* エディタ：Visual Studio Code（すでにインストール済み）
* ローカル開発：

  * バックエンド・フロントエンドを同一マシン上で開発・動作確認
  * 必要に応じてローカルDB（例：SQLite）を用いてスタンドアロンで動かせるようにする

### 5.2 実装方針（ざっくり）

* バックエンド

  * YouTube Data APIを叩き、動画情報の取得・DB登録・検索APIを提供する役割
  * APIキーなどの秘密情報はバックエンド側に保持し、フロントには出さない

* フロントエンド

  * 検索フォーム・結果一覧表示・タグ編集UIなどを実装
  * バックエンドのREST APIと通信し、検索結果やタグ更新を反映

具体的な言語・フレームワーク（Node.js / Python / フロントのフレームワーク等）は今後の段階で選定可能だが、
VSCodeがすでに導入されているため、一般的なJavaScript/TypeScriptベースのスタックとの相性が良い。

---

## 6. 制約・注意点

* YouTubeの仕様上、完全な非公開動画・非公開再生リストについては、
  一般的なAPIキーのみでは取得できないため、本サイトの対象外とする。
* 限定公開（unlisted）の動画であっても、URLが分かり、API側が返してくれる範囲に限り、
  本サイトへ登録・検索対象にすることが可能。
* 将来的にアクセス権限が必要なケース（自分のアカウントの非公開動画も扱いたい等）が出た場合、
  YouTube APIのOAuth認証を導入する拡張余地を残しておく。

---


